<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - ResuMentor</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/settings.css">
    <link rel="icon" href="/static/assets/favicon.svg" type="image/svg">
</head>

<body>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-inner">
                <a href="/" class="logo">
                    <div class="logo-icon">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                             xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z"
                                  fill="currentColor"/>
                        </svg>
                    </div>
                    <span class="logo-text">ResuMentor</span>
                </a>

                <div class="navbar-right">
                    <div class="nav-links">
                        <a href="/" class="nav-link">Home</a>
                        <a href="/interview" class="nav-link">Interview</a>
                        <a href="/ats_score" class="nav-link">ATS Score</a>
                        <a href="/history" class="nav-link">History</a>
                        <a href="/settings" class="nav-link active">Settings</a>
                    </div>

                    <div class="nav-divider"></div>

                    <!-- Google Auth Profile Section -->
                    <div class="profile-section">
                        {% if session['user'] %}
                        <a href="/profile" class="profile-link">
                            <img src="{{ session['user'].avatar_url }}" alt="Profile" class="profile-avatar">
                            <span>Profile</span>
                        </a>
                        {% else %}
                        <a href="/auth/login" class="profile-link">
                            <div class="profile-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                     xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z"
                                        fill="currentColor"/>
                                </svg>
                            </div>
                            <span>Login</span>
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <div class="content-container">
            <header class="page-header">
                <div class="header-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" height="32px" viewBox="0 -960 960 960" width="32px">
                        <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"/>
                    </svg>
                </div>
                <h1>Settings</h1>
                <p class="page-subtitle">Customize your IntelliView experience</p>
            </header>

            <div class="settings-container">
                <!-- Account Settings -->
                <section class="settings-section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                                 width="24px">
                                <path d="M480-480q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM160-160v-112q0-34 17.5-62.5T224-378q62-31 126-46.5T480-440q66 0 130 15.5T736-378q29 15 46.5 43.5T800-272v112H160Zm80-80h480v-32q0-11-5.5-20T700-306q-54-27-109-40.5T480-360q-56 0-111 13.5T260-306q-9 5-14.5 14t-5.5 20v32Zm240-320q33 0 56.5-23.5T560-640q0-33-23.5-56.5T480-720q-33 0-56.5 23.5T400-640q0 33 23.5 56.5T480-560Zm0-80Zm0 400Z"/>
                            </svg>
                        </div>
                        <h2>Account</h2>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="display-name">Display Name</label>
                            <p class="setting-description">Your name as it appears to others</p>
                        </div>
                        <div class="setting-control">
                            <input type="text" id="display-name" class="form-input"
                                   value="{{ user_info.name or '' }}"
                                   placeholder="Enter your display name">
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="email">Email Address</label>
                            <p class="setting-description">Your email for account notifications</p>
                        </div>
                        <div class="setting-control">
                            <input type="email" id="email" class="form-input"
                                   value="{{ user_info.email or '' }}"
                                   placeholder="Enter your email">
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label>Password</label>
                            <p class="setting-description">Change your account password</p>
                        </div>
                        <div class="setting-control">
                            <button class="secondary-button">Change Password</button>
                        </div>
                    </div>
                </section>

                <!-- Interview Preferences -->
                <section class="settings-section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                                 width="24px">
                                <path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h480q33 0 56.5 23.5T720-720v180l160-160v440L720-420v180q0 33-23.5 56.5T640-160H160Zm0-80h480v-480H160v480Zm0 0v-480 480Z"/>
                            </svg>
                        </div>
                        <h2>Interview Preferences</h2>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="default-interview-type">Default Interview Type</label>
                            <p class="setting-description">Your preferred interview style</p>
                        </div>
                        <div class="setting-control">
                            <select id="default-interview-type" class="form-select">
                                <option value="technical">Technical Interview</option>
                                <option value="behavioral" selected>Behavioral Interview</option>
                                <option value="common-questions">Common Questions</option>
                            </select>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="speech-recognition">Speech Recognition</label>
                            <p class="setting-description">Enable voice-to-text for answers</p>
                        </div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <input type="checkbox" id="speech-recognition" checked>
                                <label for="speech-recognition" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="video-analysis">Video Analysis</label>
                            <p class="setting-description">Enable real-time body language analysis</p>
                        </div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <input type="checkbox" id="video-analysis" checked>
                                <label for="video-analysis" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="question-difficulty">Question Difficulty</label>
                            <p class="setting-description">Preferred difficulty level for questions</p>
                        </div>
                        <div class="setting-control">
                            <select id="question-difficulty" class="form-select">
                                <option value="easy">Easy</option>
                                <option value="medium" selected>Medium</option>
                                <option value="hard">Hard</option>
                                <option value="mixed">Mixed</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Notifications -->
                <section class="settings-section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                                 width="24px">
                                <path d="M160-200v-80h80v-280q0-83 50-147.5T420-792v-28q0-25 17.5-42.5T480-880q25 0 42.5 17.5T540-820v28q80 20 130 84.5T720-560v280h80v80H160Zm320-300Zm0 420q-33 0-56.5-23.5T400-160h160q0 33-23.5 56.5T480-80ZM320-280h320v-280q0-66-47-113t-113-47q-66 0-113 47t-47 113v280Z"/>
                            </svg>
                        </div>
                        <h2>Notifications</h2>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="email-notifications">Email Notifications</label>
                            <p class="setting-description">Receive updates via email</p>
                        </div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <input type="checkbox" id="email-notifications" checked>
                                <label for="email-notifications" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="interview-reminders">Interview Reminders</label>
                            <p class="setting-description">Get reminders for practice sessions</p>
                        </div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <input type="checkbox" id="interview-reminders" checked>
                                <label for="interview-reminders" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="progress-updates">Progress Updates</label>
                            <p class="setting-description">Weekly progress summaries</p>
                        </div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <input type="checkbox" id="progress-updates">
                                <label for="progress-updates" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Privacy & Data -->
                <section class="settings-section">
                    <div class="section-header">
                        <div class="section-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960"
                                 width="24px">
                                <path d="M480-80q-139-35-229.5-159.5T160-516v-244l320-120 320 120v244q0 152-90.5 276.5T480-80Zm0-84q104-33 172-132t68-220v-189l-240-90-240 90v189q0 121 68 220t172 132Zm0-316Z"/>
                            </svg>
                        </div>
                        <h2>Privacy & Data</h2>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label for="data-collection">Data Collection</label>
                            <p class="setting-description">Allow collection of usage analytics</p>
                        </div>
                        <div class="setting-control">
                            <div class="toggle-switch">
                                <input type="checkbox" id="data-collection" checked>
                                <label for="data-collection" class="toggle-label"></label>
                            </div>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label>Delete Account</label>
                            <p class="setting-description">Permanently delete your account and all data</p>
                        </div>
                        <div class="setting-control">
                            <button class="danger-button">Delete Account</button>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <label>Export Data</label>
                            <p class="setting-description">Download your interview history and data</p>
                        </div>
                        <div class="setting-control">
                            <button class="secondary-button">Export Data</button>
                        </div>
                    </div>

                    <div class="setting-item">
                        <div class="setting-info">
                            <h3 class="setting-label">Log out of ResuMentor platform</h3>
                        </div>
                        <div class="setting-control">
                            <form action="{{ url_for('logout') }}" method="get">
                                <button type="submit" class="danger-button">Log out</button>
                            </form>
                        </div>
                    </div>
                </section>

                <!-- Save Changes -->
                <div class="settings-actions">
                    <button class="primary-button">Save Changes</button>
                    <button class="secondary-button">Reset to Defaults</button>
                </div>
            </div>
        </div>
    </main>

        <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-text">
                <p>&copy; 2025 ResuMentor. All rights reserved.</p>
            </div>
            <div class="footer-links">
                <a href="/privacy">Privacy Policy</a>
                <a href="/terms">Terms of Service</a>
                <a href="/support">Support</a>
            </div>
        </div>
    </footer>

    <script>
        // Handle form interactions
        document.addEventListener('DOMContentLoaded', function() {
            // Toggle switches
            const toggles = document.querySelectorAll('.toggle-switch input[type="checkbox"]');
            toggles.forEach(toggle => {
                toggle.addEventListener('change', function() {
                    console.log(`${this.id}: ${this.checked}`);
                });
            });

            // Save changes
            document.querySelector('.primary-button').addEventListener('click', function() {
                // Collect all form data
                const formData = {
                    displayName: document.getElementById('display-name').value,
                    email: document.getElementById('email').value,
                    defaultInterviewType: document.getElementById('default-interview-type').value,
                    speechRecognition: document.getElementById('speech-recognition').checked,
                    videoAnalysis: document.getElementById('video-analysis').checked,
                    questionDifficulty: document.getElementById('question-difficulty').value,
                    emailNotifications: document.getElementById('email-notifications').checked,
                    interviewReminders: document.getElementById('interview-reminders').checked,
                    progressUpdates: document.getElementById('progress-updates').checked,
                    dataCollection: document.getElementById('data-collection').checked
                };

                // Send to server
                fetch('/api/settings', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Show success message
                        alert('Settings saved successfully!');
                    } else {
                        alert('Error saving settings: ' + data.message);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error saving settings.');
                });
            });
        });
    </script>
</body>

</html>
