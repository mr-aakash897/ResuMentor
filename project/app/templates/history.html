<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interview Report - ResuMentor</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <link rel="stylesheet" href="/static/css/history.css" />
  <link rel="icon" href="/static/assets/favicon.svg" type="image/svg" />
</head>

<body>
    <nav class="navbar">
        <div class="navbar-container">
          <div class="navbar-inner">
            <a href="/" class="logo">
              <div class="logo-icon">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" fill="currentColor"/>
                </svg>
              </div>
              <span class="logo-text">ResuMentor</span>
            </a>
            
            <div class="navbar-right">
              <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/interview" class="nav-link">Interview</a>
                <a href="/ats_score" class="nav-link">ATS Score</a>
                <a href="/history" class="nav-link active">History</a>
                <a href="/settings" class="nav-link">Settings</a>
              </div>
              
              <div class="nav-divider"></div>
              
              <!-- Google Auth Profile Section -->
              <div class="profile-section">
                {% if session['user'] %}
                <a href="/profile" class="profile-link">
                  <img src="{{ session['user'].avatar_url }}" alt="Profile" class="profile-avatar">
                  <span>Profile</span>
                </a>
                {% else %}
                <a href="/auth/login" class="profile-link">
                  <div class="profile-icon">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M12 12C14.21 12 16 10.21 16 8C16 5.79 14.21 4 12 4C9.79 4 8 5.79 8 8C8 10.21 9.79 12 12 12ZM12 14C9.33 14 4 15.34 4 18V20H20V18C20 15.34 14.67 14 12 14Z" fill="currentColor"/>
                    </svg>
                  </div>
                  <span>Login</span>
                </a>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </nav>

  <main class="main-content">
    <div class="report-container">
      <header class="page-header">
        <h2>Interview Performance Report</h2>
        <p class="page-subtitle">Comprehensive analysis for measurable interview improvement</p>
      </header>

      <section class="summary-section">
        <div class="card summary-card">
          <div class="overall-score">
            <div class="details">
              <img src="{{ session['user'].avatar_url }}" alt="Candidate Picture" id="candidate-avatar">
              <div class="score-details">
                <p>Interview #<strong id="interview-id">N/A</strong></p>
                <p>Job Role: <strong id="job-role">N/A</strong></p>
                <p>Time Taken: <strong id="time-taken">N/A</strong></p>
              </div>
            </div>
            <div class="score-circle">
              <span id="overall-score-value">N/A</span>
            </div>
          </div>
          <div class="card-header">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M360-240q-33 0-56.5-23.5T280-320v-400q0-33 23.5-56.5T360-800h240q33 0 56.5 23.5T680-720v400q0 33-23.5 56.5T600-240H360Zm0-80h240v-400H360v400Zm-80 80q-33 0-56.5-23.5T200-240v-480q0-33 23.5-56.5T280-800h400q33 0 56.5 23.5T760-720v480q0 33-23.5 56.5T680-160H280Zm200-280Z" />
              </svg>
            </div>
            <h3>Interview Summary</h3>
          </div>
          <p class="summary-text" id="interview-summary">Loading summary...</p>
        </div>
      </section>

      <section class="strengths-weaknesses-section">
        <div class="pros-cons">
          <div class="card strengths">
            <div class="card-header">
              <div class="icon-wrapper strengths-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                  <path d="M440-280h80v-280h160v-80H440v-80H360v80H200v80h160v280Zm40 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
                </svg>
              </div>
              <h3>Strengths</h3>
            </div>
            <ul id="strengths-list">
              <li>
                <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                  <path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z" />
                </svg>
                Loading strengths...
              </li>
            </ul>
          </div>

          <div class="card weaknesses">
            <div class="card-header">
              <div class="icon-wrapper weaknesses-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                  <path d="m289-320-57-57 191-191-191-191 57-57 191 191 191-191 57 57-191 191 191 191-57 57-191-191-191 191ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
                </svg>
              </div>
              <h3>Weaknesses</h3>
            </div>
            <ul id="weaknesses-list">
              <li>
                <svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 -960 960 960" width="20px">
                  <path d="M480-200q-33 0-56.5-23.5T400-280q0-33 23.5-56.5T480-360q33 0 56.5 23.5T560-280q0 33-23.5 56.5T480-200Zm-40-280v-280h80v280h-80ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
                </svg>
                Loading weaknesses...
              </li>
            </ul>
          </div>
        </div>
      </section>

      <section class="analysis-section">
        <div class="card behavioral-card">
          <div class="card-header">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M480-80q-138 0-238.5-94.5T160-400q0-83 40.5-156t114.5-127q74-54 156-54h140q82 0 156 54t114.5 127q40.5 73 40.5 156t-40.5 156q-40.5 73-114.5 127t-156 54H480ZM260-480q0 66 33 118t93 84q60 32 120 32t120-32q60-32 93-84t33-118q0-66-33-118t-93-84q-60-32-120-32t-120 32q-60 32-93 84t-33 118Zm40-200q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Zm360 0q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Z" />
              </svg>
            </div>
            <h3>Behavioral Analysis</h3>
          </div>
          <div class="behavioral-tags" id="behavioral-tags-container">
            <div class="behavioral-tag neutral">Overall Tone: N/A</div>
            <div class="behavioral-tag average">Body Language: N/A</div>
            <div class="behavioral-tag good">Eye Contact: N/A</div>
            <div class="behavioral-tag neutral">Confidence: N/A</div>
            <div class="behavioral-tag engaged">Engagement: N/A</div>
          </div>
          <p class="summary-text" id="behavioral-description">Loading behavioral analysis...</p>
        </div>

        <div class="card metrics-card">
          <div class="card-header">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm80-80h400V-480h-400v280Zm0-360h400v-120h-400v120Zm0 0v-120 120Z" />
              </svg>
            </div>
            <h3>Response Metrics</h3>
          </div>
          <div class="response-metrics-grid">
            <div class="metric-item">
              <div class="metric-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                  <path d="M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm-26-214q-14 0-23-9t-9-23v-224h80v200l140-140 56 56-173 173Z" />
                </svg>
              </div>
              <div class="value" id="avg-time-per-answer">N/A</div>
              <div class="label">Avg. Time Per Answer</div>
            </div>
            <div class="metric-item">
              <div class="metric-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                  <path d="M320-200v-80q-50-20-85-61t-35-99q0-74 53-113t137-39q84 0 137 39t53 113q0 58-35 99t-85 61v80h-80Zm80-280q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400q-33 0-56.5-23.5T400-480ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm-40-120Z" />
                </svg>
              </div>
              <div class="value" id="avg-answer-length">N/A</div>
              <div class="label">Avg. Answer Length</div>
            </div>
            <div class="metric-item">
              <div class="metric-icon">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                  <path d="M480-400q-83 0-156-31.5T197-517q-54-54-85.5-127T80-720q0-83 31.5-156T197-880q54-54 127-85.5T480-920q83 0 156 31.5T763-880q54 54 85.5 127T880-720q0 83-31.5 156T763-517q-54 54-127 85.5T480-400Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0 320q-33 0-56.5-23.5T400-240v-80h80v80q0 33-23.5 56.5T480-160Zm0 80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Z" />
                </svg>
              </div>
              <div class="value" id="filler-words-percentage">N/A</div>
              <div class="label">Filler Words</div>
            </div>
          </div>
        </div>
      </section>

      <section class="language-section">
        <div class="card language-card">
          <div class="card-header">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M320-120v-80h320v80H320Zm0-200v-80h320v80H320Zm0-200v-80h320v80H320Zm-120-80q-33 0-56.5-23.5T80-760v-80q0-33 23.5-56.5T160-920h640q33 0 56.5 23.5T880-840v80q0 33-23.5 56.5T800-760H160Zm0 160q-33 0-56.5-23.5T80-600v-80q0-33 23.5-56.5T160-760h640q33 0 56.5 23.5T880-680v80q0 33-23.5 56.5T800-600H160Zm0 160q-33 0-56.5-23.5T80-440v-80q0-33 23.5-56.5T160-600h640q33 0 56.5 23.5T880-520v80q0 33-23.5 56.5T800-440H160Zm0 160q-33 0-56.5-23.5T80-280v-80q0-33 23.5-56.5T160-440h640q33 0 56.5 23.5T880-360v80q0 33-23.5 56.5T800-280H160Z" />
              </svg>
            </div>
            <h3>Language Analysis</h3>
          </div>
          <div class="language-content">
            <h4>Most Common Words</h4>
            <div class="language-tags" id="most-common-words-container"></div>
            <h4>Most Common Phrases</h4>
            <div class="language-phrases" id="most-common-phrases-container"></div>
          </div>
        </div>
      </section>

      <section class="assessment-section">
        <div class="card suitability-assessment">
          <div class="card-header">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M420-280 280-420l56-56 84 84 192-192 56 56-248 248ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/>
              </svg>
            </div>
            <h3>Suitability Assessment</h3>
          </div>
          <p class="summary-text" id="suitability-description">Loading suitability assessment...</p>
          <div class="slider-container">
            <div class="slider-track">
              <div class="slider-fill" id="suitability-fill"></div>
              <div class="slider-thumb" id="suitability-thumb"></div>
            </div>
            <div class="slider-labels">
              <span>Not Suitable</span>
              <span>Highly Suitable</span>
            </div>
            <div class="score-label"><span id="suitability-score">N/A</span></div>
          </div>
        </div>
      </section>

      <section class="conclusion-section">
        <div class="card impression-card">
          <div class="card-header">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M480-80q-138 0-238.5-94.5T160-400q0-83 40.5-156t114.5-127q74-54 156-54h140q82 0 156 54t114.5 127q40.5 73 40.5 156t-40.5 156q-40.5 73-114.5 127t-156 54H480ZM260-480q0 66 33 118t93 84q60 32 120 32t120-32q60-32 93-84t33-118q0-66-33-118t-93-84q-60-32-120-32t-120 32q-60 32-93 84t-33 118Zm40-200q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Zm360 0q-50 0-85-35t-35-85q0-50 35-85t85-35q50 0 85 35t35 85q0 50-35 85t-85 35Z" />
              </svg>
            </div>
            <h3>Overall Impression</h3>
          </div>
          <p class="overall-impression-bottom" id="overall-impression-final">Loading overall impression...</p>
        </div>

        <div class="card suggestions-card">
          <div class="card-header">
            <div class="icon-wrapper">
              <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
                <path d="M440-240q-33 0-56.5-23.5T360-320q0-33 23.5-56.5T440-400q33 0 56.5 23.5T520-320q0 33-23.5 56.5T440-240Zm40-400q-17 0-28.5-11.5T440-680v-80q0-17 11.5-28.5T480-800q17 0 28.5 11.5T520-760v80q0 17-11.5 28.5T480-640ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z" />
              </svg>
            </div>
            <h3>Suggestions for Improvement</h3>
          </div>
          <ul class="suggestions-list" id="suggestions-list">
            <li>Loading suggestions...</li>
          </ul>
        </div>
      </section>

      <section class="actions-section">
        <div class="action-buttons">
          <a href="#" class="action-button download">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
              <path d="M480-320 280-520l56-56 104 104v-328h80v328l104-104 56 56-200 200ZM240-160q-33 0-56.5-23.5T160-240v-80h80v80h480v-80h80v80q0 33-23.5 56.5T720-160H240Z" />
            </svg>
            <span>Download Report</span>
          </a>
          <a href="/interview" class="action-button practice">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px">
              <path d="M280-160v-80h400v80H280Zm0-160v-80h400v80H280Zm0-160v-80h400v80H280Zm0-160v-80h400v80H280ZM80-800v-80h800v80H80Z" />
            </svg>
            <span>Practice Again</span>
          </a>
        </div>
      </section>
    </div>
  </main>

      <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-text">
                <p>&copy; 2025 ResuMentor. All rights reserved.</p>
            </div>
            <div class="footer-links">
                <a href="/privacy">Privacy Policy</a>
                <a href="/terms">Terms of Service</a>
                <a href="/support">Support</a>
            </div>
        </div>
    </footer>

  <!-- In your “Interview Report” HTML, update the <script> block as follows -->

<script>
    document.addEventListener('DOMContentLoaded', () => {
      const pathSegments = window.location.pathname.split('/');
      const identifier = pathSegments[pathSegments.length - 1];
      if (!identifier || identifier === 'history') return;
  
      fetch(`/get-interview-report/${identifier}`)
        .then(res => res.ok ? res.json() : Promise.reject(res.statusText))
        .then(data => populateReport(data))
        .catch(error => console.error('Error fetching interview report:', error));
    });
  
    function populateReport(data) {
      // Total Time Taken
      document.getElementById('time-taken').textContent = data.time_taken;
  
      // Overall Score and Summary
      document.getElementById('interview-id').textContent        = data.interview_id;
      document.getElementById('job-role').textContent            = data.job_role;
      document.getElementById('overall-score-value').textContent = `${data.overall_score}/${data.max_score}`;
      document.getElementById('interview-summary').textContent   = data.summary;
  
      // Strengths
      const strengthsList = document.getElementById('strengths-list');
      strengthsList.innerHTML = '';
      data.strengths?.length
        ? data.strengths.forEach(s => {
            const li = document.createElement('li');
            li.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M382-240 154-468l57-57 171 171 367-367 57 57-424 424Z"/></svg>${s}`;
            strengthsList.appendChild(li);
          })
        : strengthsList.innerHTML = `<li>No strengths identified.</li>`;
  
      // Weaknesses
      const weaknessesList = document.getElementById('weaknesses-list');
      weaknessesList.innerHTML = '';
      data.weaknesses?.length
        ? data.weaknesses.forEach(w => {
            const li = document.createElement('li');
            li.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="20"><path d="M480-200q-33 0-56.5-23.5T400-280q0-33 23.5-56.5T480-360q33 0 56.5 23.5T560-280q0 33-23.5 56.5T480-200Zm-40-280v-280h80v280h-80ZM480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"/></svg>${w}`;
            weaknessesList.appendChild(li);
          })
        : weaknessesList.innerHTML = `<li>No weaknesses identified.</li>`;
  
      // Behavioral Analysis (tags and description)
      const tagContainer = document.getElementById('behavioral-tags-container');
      tagContainer.innerHTML = '';
      if (data.behavioral_analysis) {
        const { overall_tone, body_language, eye_contact, confidence, engagement, description } = data.behavioral_analysis;
        [ ['Overall Tone', overall_tone],
          ['Body Language', body_language],
          ['Eye Contact', eye_contact],
          ['Confidence', confidence],
          ['Engagement', engagement]
        ].forEach(([label, value]) => {
          const div = document.createElement('div');
          let cls = value.toLowerCase().replace(/\s+/g,'');
          if (!['neutral','good','average','engaged','poor'].includes(cls)) cls = 'neutral';
          div.className = `behavioral-tag ${cls}`;
          div.textContent = `${label}: ${value}`;
          tagContainer.appendChild(div);
        });
        document.getElementById('behavioral-description').textContent = description;
      } else {
        document.getElementById('behavioral-description').textContent = 'No behavioral data available.';
      }
  
      // Response Metrics including average time per answer
      if (data.response_metrics) {
        document.getElementById('avg-time-per-answer').textContent   = data.response_metrics.avg_time_per_answer;
        document.getElementById('avg-answer-length').textContent     = data.response_metrics.avg_answer_length;
        document.getElementById('filler-words-percentage').textContent = data.response_metrics.filler_words_percentage;
      } else {
        ['avg-time-per-answer','avg-answer-length','filler-words-percentage'].forEach(id => {
          document.getElementById(id).textContent = 'N/A';
        });
      }
  
      // Language Analysis
      const wordsContainer   = document.getElementById('most-common-words-container');
      const phrasesContainer = document.getElementById('most-common-phrases-container');
      wordsContainer.innerHTML = '';
      phrasesContainer.innerHTML = '';
      if (data.language_analysis?.most_common_words?.length) {
        data.language_analysis.most_common_words.forEach(w => {
          const span = document.createElement('span');
          span.className = 'language-tag';
          span.textContent = w;
          wordsContainer.appendChild(span);
        });
      } else {
        wordsContainer.innerHTML = '<span class="language-tag">No common words found.</span>';
      }
      if (data.language_analysis?.most_common_phrases?.length) {
        data.language_analysis.most_common_phrases.forEach(p => {
          const span = document.createElement('span');
          span.className = 'language-tag';
          span.textContent = `"${p}"`;
          phrasesContainer.appendChild(span);
        });
      } else {
        phrasesContainer.innerHTML = '<span class="language-tag">No common phrases found.</span>';
      }
  
      // Suitability Assessment (slider and score)
      if (data.suitability_assessment) {
        const { description, score } = data.suitability_assessment;
        document.getElementById('suitability-description').textContent = description;
        document.getElementById('suitability-score').textContent = score;
        const pct = (score/10)*100;
        document.getElementById('suitability-fill').style.width = `${pct}%`;
        document.getElementById('suitability-thumb').style.left  = `${pct}%`;
      } else {
        document.getElementById('suitability-description').textContent = 'N/A';
        document.getElementById('suitability-score').textContent       = 'N/A';
      }
  
      // Final Impressions and Suggestions
      document.getElementById('overall-impression-final').textContent = data.overall_impression_final  || 'N/A';
      const suggList = document.getElementById('suggestions-list');
      suggList.innerHTML = '';
      if (data.suggestions_for_improvement?.length) {
        data.suggestions_for_improvement.forEach(s => {
          const li = document.createElement('li');
          li.textContent = s;
          suggList.appendChild(li);
        });
      } else {
        suggList.innerHTML = '<li>No suggestions available.</li>';
      }
    }
  </script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // Extract identifier from URL: /history/<identifier>
    const identifier = window.location.pathname.split('/').pop();
    if (!identifier) return;

    fetch(`/get-interview-report/${identifier}`)
      .then(res => {
        if (!res.ok) throw new Error('Failed to load report');
        return res.json();
      })
      .then(data => {
        // Populate the time-taken field
        document.getElementById('time-taken').textContent = data.time_taken;
        // (You could also populate other report fields here)
      })
      .catch(err => console.error(err));
  });
</script>
</body>

</html>
